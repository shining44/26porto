(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15095,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let s=["A","B","C"],a=["bg-[var(--foreground)]","bg-[var(--foreground)] opacity-60","bg-[var(--foreground)] opacity-30"];function n(e,t,r){let s=function(){let e=[];for(let t=0;t<7;t++)e.push([0,t]),e.push([6,t]);for(let t=1;t<6;t++)e.push([t,0]),e.push([t,6]);return e}(),a=new Set;for(let t of e)a.add(`${t.r}-${t.c}`);let n=s.filter(([e,r])=>{let s=`${e}-${r}`;return!a.has(s)&&!t.has(s)});if(0===n.length)return null;let o=Math.floor(r()*n.length);return n[o]}function o(){let[e,o]=(0,r.useState)({screen:"home",tokens:[],junkBlocks:new Set,turn:0,score:0,mode:"daily",seed:""}),[l,c]=(0,r.useState)({bestScore:0,lastDaily:"",lastDailyScore:0}),[i,d]=(0,r.useState)([]),[u,x]=(0,r.useState)(!1),m=(0,r.useRef)(()=>Math.random()),h=(0,r.useRef)(0);(0,r.useEffect)(()=>{let e=localStorage.getItem("anchordrift_data");e&&c(JSON.parse(e))},[]);let v=(0,r.useCallback)((e,t,r)=>{c(s=>{let a={...s};return e>s.bestScore&&(a.bestScore=e),"daily"===t&&(a.lastDaily=r,a.lastDailyScore=e),localStorage.setItem("anchordrift_data",JSON.stringify(a)),a})},[]);(0,r.useEffect)(()=>{let t=t=>{"playing"===e.screen&&("z"===t.key||"Z"===t.key)&&i.length>0&&(o(i[i.length-1]),d(e=>e.slice(0,-1)))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e.screen,i]);let g=(0,r.useCallback)(e=>{let t,r="daily"===e?(t=new Date,`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`):`practice-${Date.now()}`;m.current=function(e){let t=0x811c9dc5;for(let r=0;r<e.length;r++)t^=e.charCodeAt(r),t=Math.imul(t,0x1000193);return function(){return t^=t>>>16,t=Math.imul(t,0x85ebca6b),t^=t>>>13,t=Math.imul(t,0xc2b2ae35),((t^=t>>>16)>>>0)/0x100000000}}(r),h.current=0;let s=n([],new Set,m.current);o({screen:"playing",tokens:[{id:h.current++,type:Math.floor(3*m.current()),r:s[0],c:s[1]}],junkBlocks:new Set,turn:0,score:0,mode:e,seed:r}),d([])},[]),f=(0,r.useCallback)((t,r)=>{if("playing"!==e.screen)return;d(t=>[...t,{...e,junkBlocks:new Set(e.junkBlocks)}]);let{tokens:s,junkBlocks:a}=e,l=new Set(a),c=e.score,i=new Map;for(let e of s){let[s,a]=function(e,t,r,s){let a=r-e,n=s-t;return 0===a&&0===n?[e,t]:Math.abs(a)>Math.abs(n)?[e+Math.sign(a),t]:[e,t+Math.sign(n)]}(e.r,e.c,t,r),n=`${s}-${a}`;if(l.has(n)){let t=`${e.r}-${e.c}`;i.has(t)||i.set(t,[]),i.get(t).push({...e})}else i.has(n)||i.set(n,[]),i.get(n).push({...e,r:s,c:a})}let u=[];for(let[e,t]of i)1===t.length?u.push(t[0]):t.every(e=>e.type===t[0].type)?c+=5*t.length:(l.add(e),c+=1);let x=l.size>=15;if(!x){let e=n(u,l,m.current);if(null===e)x=!0;else{let t={id:h.current++,type:Math.floor(3*m.current()),r:e[0],c:e[1]};u.push(t)}}o({...e,tokens:u,junkBlocks:l,turn:e.turn+1,score:c,screen:x?"gameover":"playing"}),x&&v(c,e.mode,e.seed)},[e,v]),p=(0,r.useCallback)(()=>{0===i.length||(o(i[i.length-1]),d(e=>e.slice(0,-1)))},[i]),b=(0,r.useCallback)(()=>{let{seed:t,score:r,turn:s,junkBlocks:a}=e,n=`AnchorDrift ${t}
Score: ${r}
Turns: ${s}
Junk: ${a.size}`;navigator.clipboard.writeText(n)},[e]);return(0,t.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center px-6 py-12 bg-[var(--background)]",children:(0,t.jsxs)("div",{className:"w-full max-w-sm",children:["home"===e.screen&&(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("p",{className:"text-xs text-[var(--muted)] uppercase tracking-widest mb-3",children:"Gravity Point"}),(0,t.jsx)("h1",{className:"text-3xl font-medium tracking-tight text-[var(--foreground)] mb-8",children:"Anchor Drift"}),(0,t.jsxs)("div",{className:"mb-8 text-center",children:[(0,t.jsx)("p",{className:"text-[var(--muted)] text-sm mb-2",children:"Click to set gravity anchor"}),(0,t.jsx)("p",{className:"text-[var(--muted)] text-xs",children:"All tokens drift one step toward it"}),(0,t.jsx)("p",{className:"text-[var(--muted)] text-xs",children:"Same types colliding = annihilate (score!)"}),(0,t.jsx)("p",{className:"text-[var(--muted)] text-xs",children:"Different types = junk block"}),(0,t.jsx)("p",{className:"text-[var(--muted)] text-xs",children:"Too much junk ends the game"})]}),(0,t.jsxs)("div",{className:"flex gap-3 mb-8",children:[(0,t.jsx)("button",{onClick:()=>g("daily"),className:"px-6 py-3 text-sm font-medium border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Daily"}),(0,t.jsx)("button",{onClick:()=>g("practice"),className:"px-6 py-3 text-sm font-medium border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"Practice"})]}),l.bestScore>0&&(0,t.jsxs)("p",{className:"text-xs text-[var(--muted)]",children:["Best: ",l.bestScore]})]}),"playing"===e.screen&&(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"w-full flex justify-between items-center mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.score}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"score"})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("p",{className:"text-sm text-[var(--foreground)]",children:[e.tokens.length," tokens"]})}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("p",{className:"text-sm text-[var(--muted)]",children:["junk ",e.junkBlocks.size,"/",15]})})]}),(0,t.jsx)("div",{className:"w-full h-2 bg-[var(--border)] mb-4",children:(0,t.jsx)("div",{className:"h-full bg-[var(--muted)] transition-all duration-200",style:{width:`${e.junkBlocks.size/15*100}%`}})}),(()=>{let{tokens:r,junkBlocks:n}=e,o=new Map;for(let e of r)o.set(`${e.r}-${e.c}`,e);return(0,t.jsx)("div",{className:"border border-[var(--border)]",style:{display:"grid",gridTemplateColumns:"repeat(7, 40px)",gap:"2px",padding:2},children:Array.from({length:7},(e,r)=>Array.from({length:7},(e,l)=>{let c=`${r}-${l}`,i=o.get(c),d=n.has(c),u=0===r||6===r||0===l||6===l;return(0,t.jsxs)("button",{onClick:()=>f(r,l),className:`flex items-center justify-center font-medium transition-all cursor-pointer ${d?"bg-[var(--muted)]":i?`${a[i.type]} border-2 border-[var(--foreground)]`:u?"bg-[var(--border)] hover:bg-[var(--muted)]":"bg-[var(--background)] border border-[var(--border)] hover:bg-[var(--border)]"}`,style:{width:40,height:40,fontSize:14,color:i&&0===i.type?"var(--background)":"var(--foreground)"},children:[i&&s[i.type],d&&"Ã—"]},c)}))})})(),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:p,disabled:0===i.length,className:"px-3 py-1 text-xs border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Undo"}),(0,t.jsx)("button",{onClick:()=>x(!0),className:"px-2 py-1 text-xs border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"?"})]}),(0,t.jsx)("p",{className:"mt-4 text-xs text-[var(--muted)]",children:"Click any cell to set anchor point"})]}),"gameover"===e.screen&&(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("p",{className:"text-xs text-[var(--muted)] uppercase tracking-widest mb-3",children:"Too Much Junk"}),(0,t.jsx)("h2",{className:"text-2xl font-medium text-[var(--foreground)] mb-6",children:"Game Over"}),(0,t.jsx)("p",{className:"text-4xl font-medium text-[var(--foreground)] mb-6",children:e.score}),(0,t.jsxs)("div",{className:"flex gap-8 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.turn}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"Turns"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.junkBlocks.size}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"Junk"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,t.jsx)("button",{onClick:b,className:"px-6 py-3 text-sm font-medium border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Copy Share"}),(0,t.jsx)("button",{onClick:()=>g("practice"),className:"px-6 py-3 text-sm font-medium border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"Play Again"})]}),l.bestScore>0&&(0,t.jsxs)("p",{className:"text-xs text-[var(--muted)]",children:["Best: ",l.bestScore]})]}),u&&(0,t.jsx)("div",{className:"fixed inset-0 bg-[var(--background)]/95 flex items-center justify-center p-6 z-50",children:(0,t.jsxs)("div",{className:"max-w-sm text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-[var(--foreground)] mb-4",children:"How to Play"}),(0,t.jsxs)("div",{className:"text-sm text-[var(--muted)] space-y-2 mb-6",children:[(0,t.jsx)("p",{children:"Each turn, a new token spawns on the edge."}),(0,t.jsx)("p",{children:"Click any cell to set the anchor point."}),(0,t.jsx)("p",{children:"All tokens move one step toward the anchor."}),(0,t.jsx)("p",{children:"Same type collision = annihilate (+5 each)"}),(0,t.jsx)("p",{children:"Mixed type collision = junk block (+1)"}),(0,t.jsxs)("p",{children:["Game ends at ",15," junk blocks or no spawn room."]})]}),(0,t.jsx)("button",{onClick:()=>x(!1),className:"px-6 py-2 text-sm border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Got it"})]})})]})})}e.s(["default",()=>o])}]);