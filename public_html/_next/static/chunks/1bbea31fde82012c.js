(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39036,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let s=["bg-[var(--foreground)]","bg-[var(--foreground)] opacity-70","bg-[var(--foreground)] opacity-45","bg-[var(--foreground)] opacity-25"],a=["A","B","C","D"];function n(){let[e,n]=(0,r.useState)({screen:"home",ribbon:[],turn:0,score:0,maxLen:20,mode:"daily",seed:"",bestCascade:0,selectionStart:null}),[l,o]=(0,r.useState)({bestScore:0,lastDaily:"",lastDailyScore:0}),[c,i]=(0,r.useState)([]),[d,x]=(0,r.useState)(!1),m=(0,r.useRef)(()=>Math.random());(0,r.useEffect)(()=>{let e=localStorage.getItem("ribbonflip_data");e&&o(JSON.parse(e))},[]);let u=(0,r.useCallback)(e=>{let t,r="daily"===e?(t=new Date,`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`):`practice-${Date.now()}`;m.current=function(e){let t=0x811c9dc5;for(let r=0;r<e.length;r++)t^=e.charCodeAt(r),t=Math.imul(t,0x1000193);return function(){return t^=t>>>16,t=Math.imul(t,0x85ebca6b),t^=t>>>13,t=Math.imul(t,0xc2b2ae35),((t^=t>>>16)>>>0)/0x100000000}}(r),n({screen:"playing",ribbon:[Math.floor(4*m.current()),Math.floor(4*m.current()),Math.floor(4*m.current())],turn:0,score:0,maxLen:20,mode:e,seed:r,bestCascade:0,selectionStart:null}),i([])},[]),h=(0,r.useCallback)(t=>{if("playing"===e.screen)if(null===e.selectionStart)n(e=>({...e,selectionStart:t}));else if(e.selectionStart===t)n(e=>({...e,selectionStart:null}));else{let r=Math.min(e.selectionStart,t),s=Math.max(e.selectionStart,t);i(t=>[...t,{...e}]);let a=Math.floor(4*m.current()),c=[...e.ribbon,a],d=c.slice(r,s+1).reverse();for(let e=0;e<d.length;e++)c[r+e]=d[e];let{newRibbon:x,removed:u,waves:h}=function(e){let t=[...e],r=0,s=0;for(;;){let e=new Set;for(let r=0;r<=t.length-3;r++){var a,n,l;a=t[r],n=t[r+1],l=t[r+2],a!==n&&n!==l&&a!==l&&(e.add(r),e.add(r+1),e.add(r+2))}if(0===e.size)break;s++,r+=e.size,t=t.filter((t,r)=>!e.has(r))}return{newRibbon:t,removed:r,waves:s}}(c),b=u;h>1&&(b+=(h-1)*5);let v=x.length>=20,g={...e,ribbon:x,turn:e.turn+1,score:e.score+b,bestCascade:Math.max(e.bestCascade,h),selectionStart:null,screen:v?"gameover":"playing"};if(n(g),v){let t={...l};g.score>l.bestScore&&(t.bestScore=g.score),"daily"===e.mode&&(t.lastDaily=e.seed,t.lastDailyScore=g.score),o(t),localStorage.setItem("ribbonflip_data",JSON.stringify(t))}}},[e,l]),b=(0,r.useCallback)(()=>{0===c.length||(n(c[c.length-1]),i(e=>e.slice(0,-1)))},[c]),v=(0,r.useCallback)(()=>{let{seed:t,score:r,turn:s,bestCascade:a,ribbon:n}=e,l=`RibbonFlip ${t}
Score: ${r}
Turns: ${s}
Best cascade: ${a} waves
Final length: ${n.length}`;navigator.clipboard.writeText(l)},[e]);return(0,t.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center px-6 py-12 bg-[var(--background)]",children:(0,t.jsxs)("div",{className:"w-full max-w-sm",children:["home"===e.screen&&(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("p",{className:"text-xs text-[var(--muted)] uppercase tracking-widest mb-3",children:"Segment Reversal"}),(0,t.jsx)("h1",{className:"text-3xl font-medium tracking-tight text-[var(--foreground)] mb-8",children:"RibbonFlip"}),(0,t.jsxs)("div",{className:"mb-8 text-center",children:[(0,t.jsx)("p",{className:"text-[var(--muted)] text-sm mb-2",children:"Reverse segments to create matches"}),(0,t.jsx)("p",{className:"text-[var(--muted)] text-xs",children:"Each turn adds a new bead"}),(0,t.jsx)("p",{className:"text-[var(--muted)] text-xs",children:"Triples of 3 different colors vanish"}),(0,t.jsxs)("p",{className:"text-[var(--muted)] text-xs",children:["Don't let ribbon reach ",20,"!"]})]}),(0,t.jsxs)("div",{className:"flex gap-3 mb-8",children:[(0,t.jsx)("button",{onClick:()=>u("daily"),className:"px-6 py-3 text-sm font-medium border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Daily"}),(0,t.jsx)("button",{onClick:()=>u("practice"),className:"px-6 py-3 text-sm font-medium border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"Practice"})]}),l.bestScore>0&&(0,t.jsxs)("p",{className:"text-xs text-[var(--muted)]",children:["Best: ",l.bestScore]})]}),"playing"===e.screen&&(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"w-full flex justify-between items-center mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.score}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"score"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("p",{className:"text-sm text-[var(--foreground)]",children:[e.ribbon.length,"/",20]}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"length"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.turn}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"turns"})]})]}),(0,t.jsx)("div",{className:"w-full h-2 bg-[var(--border)] mb-6",children:(0,t.jsx)("div",{className:"h-full bg-[var(--foreground)] transition-all duration-200",style:{width:`${e.ribbon.length/20*100}%`}})}),(0,t.jsx)("div",{className:"mb-6",children:(()=>{let{ribbon:r,selectionStart:n}=e,l=Math.min(36,320/Math.max(r.length,10));return(0,t.jsx)("div",{className:"flex flex-wrap gap-1 justify-center max-w-[340px]",children:r.map((e,r)=>(0,t.jsx)("button",{onClick:()=>h(r),className:`flex items-center justify-center font-medium border-2 transition-all ${r===n?"border-[var(--foreground)] ring-2 ring-[var(--foreground)]":"border-[var(--foreground)]"} ${s[e]}`,style:{width:l,height:l,fontSize:.4*l,color:e<2?"var(--background)":"var(--foreground)"},children:a[e]},r))})})()}),null!==e.selectionStart&&(0,t.jsx)("p",{className:"text-xs text-[var(--muted)] mb-4",children:"Click another bead to reverse segment"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:b,disabled:0===c.length,className:"px-3 py-1 text-xs border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Undo"}),(0,t.jsx)("button",{onClick:()=>x(!0),className:"px-2 py-1 text-xs border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"?"})]}),(0,t.jsx)("p",{className:"mt-4 text-xs text-[var(--muted)]",children:"Click two beads to reverse that segment"})]}),"gameover"===e.screen&&(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("p",{className:"text-xs text-[var(--muted)] uppercase tracking-widest mb-3",children:"Ribbon Full"}),(0,t.jsx)("h2",{className:"text-2xl font-medium text-[var(--foreground)] mb-6",children:"Game Over"}),(0,t.jsx)("p",{className:"text-4xl font-medium text-[var(--foreground)] mb-6",children:e.score}),(0,t.jsxs)("div",{className:"flex gap-8 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.turn}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"Turns"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.bestCascade}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"Best Cascade"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,t.jsx)("button",{onClick:v,className:"px-6 py-3 text-sm font-medium border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Copy Share"}),(0,t.jsx)("button",{onClick:()=>u("practice"),className:"px-6 py-3 text-sm font-medium border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"Play Again"})]}),l.bestScore>0&&(0,t.jsxs)("p",{className:"text-xs text-[var(--muted)]",children:["Best: ",l.bestScore]})]}),d&&(0,t.jsx)("div",{className:"fixed inset-0 bg-[var(--background)]/95 flex items-center justify-center p-6 z-50",children:(0,t.jsxs)("div",{className:"max-w-sm text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-[var(--foreground)] mb-4",children:"How to Play"}),(0,t.jsxs)("div",{className:"text-sm text-[var(--muted)] space-y-2 mb-6",children:[(0,t.jsx)("p",{children:"Each turn, one new bead is added to the ribbon."}),(0,t.jsx)("p",{children:"Click two beads to reverse the segment between them."}),(0,t.jsx)("p",{children:"Any consecutive triple of 3 DIFFERENT colors vanishes."}),(0,t.jsx)("p",{children:"Cascades can trigger: cleared beads may create new triples."}),(0,t.jsxs)("p",{children:["Game ends when ribbon reaches ",20," beads."]})]}),(0,t.jsx)("button",{onClick:()=>x(!1),className:"px-6 py-2 text-sm border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Got it"})]})})]})})}e.s(["default",()=>n])}]);