(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,39532,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function s(e){let t=0x811c9dc5;for(let r=0;r<e.length;r++)t^=e.charCodeAt(r),t=Math.imul(t,0x1000193);return function(){return t^=t>>>16,t=Math.imul(t,0x85ebca6b),t^=t>>>13,t=Math.imul(t,0xc2b2ae35),((t^=t>>>16)>>>0)/0x100000000}}function l(e){let t=0;for(let r of e)for(let e of r)e&&t++;return t}function a(){let e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function o(){let[e,o]=(0,r.useState)({screen:"home",grid:[],movesLeft:7,initialLitCount:0,mode:"daily",seed:"",score:0,moveHistory:[]}),[n,i]=(0,r.useState)({bestScore:0,lastDaily:"",lastDailyResult:null,lastDailyScore:0}),[c,d]=(0,r.useState)(null),[x,m]=(0,r.useState)([]),[u,h]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("foldline_data");e&&i(JSON.parse(e))},[]);let v=(0,r.useCallback)(e=>{let t="daily"===e?a():`practice-${Date.now()}`,r=function(e){let t=0,r=s(e);for(;t<100;){let a=[];for(let e=0;e<6;e++){let e=[];for(let t=0;t<6;t++)e.push(.45>r());a.push(e)}let o=l(a);if(o>7.2&&o<25.2)return a;r=s(e+ ++t)}return function(e){let t=s(e),r=[];for(let e=0;e<6;e++){let e=[];for(let r=0;r<6;r++)e.push(.45>t());r.push(e)}return r}(e)}(t),n=l(r);o({screen:"playing",grid:r,movesLeft:7,initialLitCount:n,mode:e,seed:t,score:0,moveHistory:[]}),m([])},[]),f=(0,r.useCallback)((t,r)=>{let s,a;if("playing"!==e.screen||e.movesLeft<=0)return;let{grid:c,movesLeft:d}=e;m(t=>[...t,{...e,grid:c.map(e=>[...e])}]),"h"===t?(s=function(e,t){let r=e.length,s=e[0].length;if(t<=r-t){let l=[];for(let s=t;s<r;s++)l.push([...e[s]]);for(let r=0;r<t;r++){let a=t-1-r;for(let t=0;t<s;t++)l[a][t]=l[a][t]!==e[r][t]}return l}{let l=[];for(let r=0;r<t;r++)l.push([...e[r]]);for(let a=t;a<r;a++){let r=a-t,o=t-1-r;for(let t=0;t<s;t++)l[o][t]=l[o][t]!==e[a][t]}return l}}(c,r),a=`H${r}`):(s=function(e,t){let r=e.length,s=e[0].length,l=s-t;if(t<=l){let s=[];for(let l=0;l<r;l++)s.push(e[l].slice(t));for(let l=0;l<r;l++)for(let r=0;r<t;r++){let a=t-1-r;s[l][a]=s[l][a]!==e[l][r]}return s}{let l=[];for(let s=0;s<r;s++)l.push(e[s].slice(0,t));for(let a=0;a<r;a++)for(let r=t;r<s;r++){let s=r-t,o=t-1-s;l[a][o]=l[a][o]!==e[a][r]}return l}}(c,r),a=`V${r}`);let x=d-1,u=l(s),h=0===u,v=0===x&&!h,f="playing",g=e.initialLitCount-u;if(h?(f="win",g=g+50+10*x):v&&(f="lose"),o({...e,grid:s,movesLeft:x,screen:f,score:g,moveHistory:[...e.moveHistory,a]}),"win"===f||"lose"===f){let t={...n};g>n.bestScore&&(t.bestScore=g),"daily"===e.mode&&(t.lastDaily=e.seed,t.lastDailyResult=f,t.lastDailyScore=g),i(t),localStorage.setItem("foldline_data",JSON.stringify(t))}},[e,n]),g=(0,r.useCallback)(()=>{0===x.length||(o(x[x.length-1]),m(e=>e.slice(0,-1)))},[x]),p=(0,r.useCallback)(()=>{let{grid:t,moveHistory:r,seed:s,score:a,screen:o,initialLitCount:n}=e,i=l(t),c=r.length,d=`Foldline ${s}
`;d+=`Result: ${"win"===o?"WIN":"LOSE"} in ${c}/7
Cleared: ${n-i}/${n}
Score: ${a}
Moves: ${r.join(" ")}
`,navigator.clipboard.writeText(d)},[e]);return(0,t.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center px-6 py-12 bg-[var(--background)]",children:(0,t.jsxs)("div",{className:"w-full max-w-sm",children:["home"===e.screen&&(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("p",{className:"text-xs text-[var(--muted)] uppercase tracking-widest mb-3",children:"XOR Paper-Folding"}),(0,t.jsx)("h1",{className:"text-3xl font-medium tracking-tight text-[var(--foreground)] mb-8",children:"Foldline"}),(0,t.jsxs)("div",{className:"mb-8 text-center",children:[(0,t.jsx)("p",{className:"text-[var(--muted)] text-sm mb-2",children:"Fold the grid to cancel lit cells"}),(0,t.jsx)("p",{className:"text-[var(--muted)] text-xs",children:"Click between rows/cols to fold"}),(0,t.jsx)("p",{className:"text-[var(--muted)] text-xs",children:"Overlapping cells XOR (same = off)"}),(0,t.jsx)("p",{className:"text-[var(--muted)] text-xs",children:"Turn all cells off to win"})]}),(0,t.jsxs)("div",{className:"flex gap-3 mb-8",children:[(0,t.jsx)("button",{onClick:()=>v("daily"),className:"px-6 py-3 text-sm font-medium border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Daily"}),(0,t.jsx)("button",{onClick:()=>v("practice"),className:"px-6 py-3 text-sm font-medium border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"Practice"})]}),n.bestScore>0&&(0,t.jsxs)("p",{className:"text-xs text-[var(--muted)]",children:["Best: ",n.bestScore]}),n.lastDaily===a()&&n.lastDailyResult&&(0,t.jsxs)("p",{className:"text-xs text-[var(--muted)] mt-2",children:["Today: ","win"===n.lastDailyResult?"Won":"Lost"," (",n.lastDailyScore,")"]})]}),"playing"===e.screen&&(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"w-full flex justify-between items-center mb-6",children:[(0,t.jsx)("div",{children:(0,t.jsx)("p",{className:"text-xs text-[var(--muted)] uppercase tracking-widest",children:"daily"===e.mode?e.seed:"Practice"})}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.movesLeft}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"moves left"})]})]}),(0,t.jsx)("div",{className:"mb-6",children:(()=>{let{grid:r}=e;if(0===r.length)return null;let s=r.length,l=r[0].length,a=Math.min(48,300/Math.max(s,l));return(0,t.jsxs)("div",{className:"relative",children:[Array.from({length:s-1},(e,t)=>t+1).map(e=>(0,t.jsx)("div",{className:`absolute left-0 right-0 h-3 cursor-pointer transition-colors ${c?.type==="h"&&c.index===e?"bg-[var(--foreground)] opacity-20":"hover:bg-[var(--muted)] hover:opacity-20"}`,style:{top:e*(a+3)-1.5-6},onClick:()=>f("h",e),onMouseEnter:()=>d({type:"h",index:e}),onMouseLeave:()=>d(null)},`h-${e}`)),Array.from({length:l-1},(e,t)=>t+1).map(e=>(0,t.jsx)("div",{className:`absolute top-0 bottom-0 w-3 cursor-pointer transition-colors ${c?.type==="v"&&c.index===e?"bg-[var(--foreground)] opacity-20":"hover:bg-[var(--muted)] hover:opacity-20"}`,style:{left:e*(a+3)-1.5-6},onClick:()=>f("v",e),onMouseEnter:()=>d({type:"v",index:e}),onMouseLeave:()=>d(null)},`v-${e}`)),(0,t.jsx)("div",{className:"grid",style:{gridTemplateColumns:`repeat(${l}, ${a}px)`,gap:"3px"},children:r.map((e,r)=>e.map((e,s)=>(0,t.jsx)("div",{className:`transition-all duration-150 ${e?"bg-[var(--foreground)]":"bg-[var(--border)]"}`,style:{width:a,height:a}},`${r}-${s}`)))})]})})()}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsxs)("p",{className:"text-sm text-[var(--muted)]",children:["Lit: ",l(e.grid)]}),(0,t.jsx)("button",{onClick:g,disabled:0===x.length,className:"px-3 py-1 text-xs border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Undo"}),(0,t.jsx)("button",{onClick:()=>h(!0),className:"px-3 py-1 text-xs border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"?"})]}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"Click gaps between rows/cols to fold"})]}),("win"===e.screen||"lose"===e.screen)&&(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("p",{className:"text-xs text-[var(--muted)] uppercase tracking-widest mb-3",children:"daily"===e.mode?e.seed:"Practice"}),(0,t.jsx)("h2",{className:"text-2xl font-medium text-[var(--foreground)] mb-6",children:"win"===e.screen?"Solved!":"Out of Moves"}),(0,t.jsx)("p",{className:"text-4xl font-medium text-[var(--foreground)] mb-6",children:e.score}),(0,t.jsxs)("div",{className:"flex gap-8 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.moveHistory.length}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"Moves"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.initialLitCount-l(e.grid)}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"Cleared"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:l(e.grid)}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"Remaining"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,t.jsx)("button",{onClick:p,className:"px-6 py-3 text-sm font-medium border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Copy Share"}),(0,t.jsx)("button",{onClick:()=>v("practice"),className:"px-6 py-3 text-sm font-medium border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"New Game"})]}),n.bestScore>0&&(0,t.jsxs)("p",{className:"text-xs text-[var(--muted)]",children:["Best: ",n.bestScore]})]}),u&&(0,t.jsx)("div",{className:"fixed inset-0 bg-[var(--background)]/95 flex items-center justify-center p-6 z-50",children:(0,t.jsxs)("div",{className:"max-w-sm text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-[var(--foreground)] mb-4",children:"How to Play"}),(0,t.jsxs)("div",{className:"text-sm text-[var(--muted)] space-y-2 mb-6",children:[(0,t.jsx)("p",{children:"Click between rows or columns to fold the grid."}),(0,t.jsx)("p",{children:"The smaller half folds onto the larger half."}),(0,t.jsx)("p",{children:"Overlapping cells XOR: same state → off, different → on."}),(0,t.jsx)("p",{children:"Turn all cells off within the move limit to win."})]}),(0,t.jsx)("button",{onClick:()=>h(!1),className:"px-6 py-2 text-sm border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Got it"})]})})]})})}e.s(["default",()=>o])}]);