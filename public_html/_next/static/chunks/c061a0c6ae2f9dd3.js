(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,26563,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let s=["A","B","C"],a=["bg-[var(--foreground)]","bg-[var(--foreground)] opacity-60","bg-[var(--foreground)] opacity-30"];function l(){let[e,l]=(0,r.useState)({screen:"home",line:[],turn:0,score:0,maxLen:24,mode:"daily",seed:"",bestClear:0,selectedIndex:null}),[n,o]=(0,r.useState)({bestScore:0,lastDaily:"",lastDailyScore:0}),[c,d]=(0,r.useState)([]),[i,x]=(0,r.useState)(!1),m=(0,r.useRef)(()=>Math.random());(0,r.useEffect)(()=>{let e=localStorage.getItem("flipbook_data");e&&o(JSON.parse(e))},[]);let u=(0,r.useCallback)(e=>{let t,r="daily"===e?(t=new Date,`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`):`practice-${Date.now()}`;m.current=function(e){let t=0x811c9dc5;for(let r=0;r<e.length;r++)t^=e.charCodeAt(r),t=Math.imul(t,0x1000193);return function(){return t^=t>>>16,t=Math.imul(t,0x85ebca6b),t^=t>>>13,t=Math.imul(t,0xc2b2ae35),((t^=t>>>16)>>>0)/0x100000000}}(r),l({screen:"playing",line:[Math.floor(3*m.current()),Math.floor(3*m.current()),Math.floor(3*m.current())],turn:0,score:0,maxLen:24,mode:e,seed:r,bestClear:0,selectedIndex:null}),d([])},[]),h=(0,r.useCallback)(t=>{if("playing"===e.screen)if(null===e.selectedIndex)l(e=>({...e,selectedIndex:t}));else{if(e.selectedIndex===t)return void l(e=>({...e,selectedIndex:null}));d(t=>[...t,{...e}]);let r=Math.floor(3*m.current()),s=[...e.line,r],a=e.selectedIndex,c=[...s.slice(0,a),...s.slice(a).reverse()],i=c.length,x=function(e){let t=[];for(let r of e)t.length>0&&t[t.length-1]===r?t.pop():t.push(r);return t}(c),u=i-x.length,h=u;u>=6&&(h+=(u-5)*2);let v=x.length>=24,f={...e,line:x,turn:e.turn+1,score:e.score+h,bestClear:Math.max(e.bestClear,u),selectedIndex:null,screen:v?"gameover":"playing"};if(l(f),v){let t={...n};f.score>n.bestScore&&(t.bestScore=f.score),"daily"===e.mode&&(t.lastDaily=e.seed,t.lastDailyScore=f.score),o(t),localStorage.setItem("flipbook_data",JSON.stringify(t))}}},[e,n]),v=(0,r.useCallback)(()=>{0===c.length||(l(c[c.length-1]),d(e=>e.slice(0,-1)))},[c]),f=(0,r.useCallback)(()=>{let{seed:t,score:r,turn:s,bestClear:a,line:l}=e,n=`Flipbook ${t}
Score: ${r}
Turns: ${s}
Best clear: ${a}
Final: ${l.length}`;navigator.clipboard.writeText(n)},[e]);return(0,t.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center px-6 py-12 bg-[var(--background)]",children:(0,t.jsxs)("div",{className:"w-full max-w-sm",children:["home"===e.screen&&(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("p",{className:"text-xs text-[var(--muted)] uppercase tracking-widest mb-3",children:"Suffix Reversal"}),(0,t.jsx)("h1",{className:"text-3xl font-medium tracking-tight text-[var(--foreground)] mb-8",children:"Flipbook"}),(0,t.jsxs)("div",{className:"mb-8 text-center",children:[(0,t.jsx)("p",{className:"text-[var(--muted)] text-sm mb-2",children:"Reverse suffixes to create pairs"}),(0,t.jsx)("p",{className:"text-[var(--muted)] text-xs",children:"Each turn adds a new symbol"}),(0,t.jsx)("p",{className:"text-[var(--muted)] text-xs",children:"Adjacent matching pairs cancel out"}),(0,t.jsxs)("p",{className:"text-[var(--muted)] text-xs",children:["Don't let line reach ",24,"!"]})]}),(0,t.jsxs)("div",{className:"flex gap-3 mb-8",children:[(0,t.jsx)("button",{onClick:()=>u("daily"),className:"px-6 py-3 text-sm font-medium border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Daily"}),(0,t.jsx)("button",{onClick:()=>u("practice"),className:"px-6 py-3 text-sm font-medium border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"Practice"})]}),n.bestScore>0&&(0,t.jsxs)("p",{className:"text-xs text-[var(--muted)]",children:["Best: ",n.bestScore]})]}),"playing"===e.screen&&(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"w-full flex justify-between items-center mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.score}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"score"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("p",{className:"text-sm text-[var(--foreground)]",children:[e.line.length,"/",24]}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"length"})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.turn}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"turns"})]})]}),(0,t.jsx)("div",{className:"w-full h-2 bg-[var(--border)] mb-6",children:(0,t.jsx)("div",{className:"h-full bg-[var(--foreground)] transition-all duration-200",style:{width:`${e.line.length/24*100}%`}})}),(0,t.jsx)("div",{className:"mb-6",children:(()=>{let{line:r,selectedIndex:l}=e,n=Math.min(32,320/Math.max(r.length,12));return(0,t.jsx)("div",{className:"flex flex-wrap gap-1 justify-center max-w-[340px]",children:r.map((e,r)=>{let o=l===r,c=null!==l&&r>=l;return(0,t.jsx)("button",{onClick:()=>h(r),className:`flex items-center justify-center font-medium border-2 transition-all ${o?"border-[var(--foreground)] ring-2 ring-[var(--foreground)]":c?"border-[var(--foreground)] border-dashed":"border-[var(--foreground)]"} ${a[e]}`,style:{width:n,height:n,fontSize:.45*n,color:0===e?"var(--background)":"var(--foreground)"},children:s[e]},r)})})})()}),null!==e.selectedIndex&&(0,t.jsxs)("p",{className:"text-xs text-[var(--muted)] mb-4",children:["Suffix from position ",e.selectedIndex," will be reversed"]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:v,disabled:0===c.length,className:"px-3 py-1 text-xs border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] disabled:opacity-30 disabled:cursor-not-allowed transition-colors",children:"Undo"}),(0,t.jsx)("button",{onClick:()=>x(!0),className:"px-2 py-1 text-xs border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"?"})]}),(0,t.jsx)("p",{className:"mt-4 text-xs text-[var(--muted)]",children:"Click a tile to select cut point, then click again to flip"})]}),"gameover"===e.screen&&(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("p",{className:"text-xs text-[var(--muted)] uppercase tracking-widest mb-3",children:"Line Full"}),(0,t.jsx)("h2",{className:"text-2xl font-medium text-[var(--foreground)] mb-6",children:"Game Over"}),(0,t.jsx)("p",{className:"text-4xl font-medium text-[var(--foreground)] mb-6",children:e.score}),(0,t.jsxs)("div",{className:"flex gap-8 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.turn}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"Turns"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.bestClear}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"Best Clear"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,t.jsx)("button",{onClick:f,className:"px-6 py-3 text-sm font-medium border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Copy Share"}),(0,t.jsx)("button",{onClick:()=>u("practice"),className:"px-6 py-3 text-sm font-medium border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"Play Again"})]}),n.bestScore>0&&(0,t.jsxs)("p",{className:"text-xs text-[var(--muted)]",children:["Best: ",n.bestScore]})]}),i&&(0,t.jsx)("div",{className:"fixed inset-0 bg-[var(--background)]/95 flex items-center justify-center p-6 z-50",children:(0,t.jsxs)("div",{className:"max-w-sm text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-[var(--foreground)] mb-4",children:"How to Play"}),(0,t.jsxs)("div",{className:"text-sm text-[var(--muted)] space-y-2 mb-6",children:[(0,t.jsx)("p",{children:"Each turn, one new symbol is added."}),(0,t.jsx)("p",{children:"Click a tile to select it as the cut point."}),(0,t.jsx)("p",{children:"Click again anywhere to reverse everything from there to the end."}),(0,t.jsx)("p",{children:"Adjacent matching pairs (AA, BB, CC) cancel out."}),(0,t.jsx)("p",{children:"Cancellations cascade until no more pairs exist."}),(0,t.jsxs)("p",{children:["Game ends when line reaches ",24,"."]})]}),(0,t.jsx)("button",{onClick:()=>x(!1),className:"px-6 py-2 text-sm border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Got it"})]})})]})})}e.s(["default",()=>l])}]);