(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84991,e=>{"use strict";var t=e.i(43476),r=e.i(71645);function s(){let[e,s]=(0,r.useState)({screen:"home",switches:[!1,!1,!1],trains:[],score:0,delivered:0,streak:0,bestStreak:0,lives:3,tickMs:250,mode:"daily",seed:"",spawnCounter:0}),[a,o]=(0,r.useState)({bestScore:0,lastDaily:"",lastDailyScore:0}),[l,n]=(0,r.useState)(!1),[i,d]=(0,r.useState)(0),c=(0,r.useRef)(()=>Math.random()),x=(0,r.useRef)(null),u=(0,r.useRef)(0);(0,r.useEffect)(()=>{let e=localStorage.getItem("switchyard_data");e&&o(JSON.parse(e))},[]);let m=(0,r.useCallback)(e=>{let t=["R","G","B"][Math.floor(3*e())];return u.current++,{id:u.current,color:t,x:0,y:150,progress:0,path:"upper",delivered:!1}},[]),h=(0,r.useCallback)((e,t)=>{let r=e.progress;if(r<=20)return{x:20+4*r,y:150};if(r<=40){let e=(r-20)/20;return t[0]?{x:100+80*e,y:150-70*e}:{x:100+80*e,y:150+70*e}}let s=t[0];if(r<=60){let e=(r-40)/20;return s?{x:180+60*e,y:80}:{x:180+60*e,y:220}}if(r<=80){let e=(r-60)/20;if(s)if(t[1])return{x:240+80*e,y:80-30*e};else return{x:240+60*e,y:80+70*e};return t[2]?{x:240+80*e,y:220+30*e}:{x:240+60*e,y:220-70*e}}let a=(r-80)/20;return s&&t[1]?{x:320+60*a,y:50}:!s&&t[2]?{x:320+60*a,y:250}:{x:300+80*a,y:150}},[]),v=(0,r.useCallback)(e=>e[0]&&e[1]?"R":!e[0]&&e[2]?"G":"B",[]),g=(0,r.useCallback)(()=>{s(e=>{if("playing"!==e.screen)return e;let t=[...e.trains],r=e.score,s=e.delivered,l=e.streak,n=e.bestStreak,i=e.lives,d=e.tickMs,x=!1;t=(t=t.map(e=>({...e,progress:e.progress+3}))).filter(t=>!(t.progress>=100)||(v(e.switches)===t.color?(r+=10+2*l,s++,++l>n&&(n=l),s%5==0&&(d=Math.max(120,d-10))):(i--,l=0),!1));for(let r=0;r<t.length;r++)for(let s=r+1;s<t.length;s++){let a=h(t[r],e.switches),o=h(t[s],e.switches);15>Math.sqrt((a.x-o.x)**2+(a.y-o.y)**2)&&(x=!0)}if(x||i<=0){let t={...a};return r>a.bestScore&&(t.bestScore=r),"daily"===e.mode&&(t.lastDaily=e.seed,t.lastDailyScore=r),o(t),localStorage.setItem("switchyard_data",JSON.stringify(t)),{...e,screen:"gameover",score:r,bestStreak:n}}let u=e.spawnCounter+1;return u>=15&&t.length<4&&(t.push(m(c.current)),u=0),{...e,trains:t,score:r,delivered:s,streak:l,bestStreak:n,lives:i,tickMs:d,spawnCounter:u}})},[h,v,m,a]);(0,r.useEffect)(()=>{if("playing"===e.screen)return x.current=setInterval(g,e.tickMs),()=>{x.current&&clearInterval(x.current)}},[e.screen,e.tickMs,g]);let b=(0,r.useCallback)(e=>{let t,r="daily"===e?(t=new Date,`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`):`practice-${Date.now()}`;c.current=function(e){let t=0x811c9dc5;for(let r=0;r<e.length;r++)t^=e.charCodeAt(r),t=Math.imul(t,0x1000193);return function(){return t^=t>>>16,t=Math.imul(t,0x85ebca6b),t^=t>>>13,t=Math.imul(t,0xc2b2ae35),((t^=t>>>16)>>>0)/0x100000000}}(r),u.current=0,s({screen:"playing",switches:[!1,!1,!1],trains:[m(c.current)],score:0,delivered:0,streak:0,bestStreak:0,lives:3,tickMs:250,mode:e,seed:r,spawnCounter:0})},[m]),f=(0,r.useCallback)(e=>{let t=Date.now();t-i<150||(d(t),s(t=>{if("playing"!==t.screen)return t;let r=[...t.switches];return r[e]=!r[e],{...t,switches:r}}))},[i]),p=(0,r.useCallback)(()=>{let{seed:t,score:r,delivered:s,bestStreak:a,tickMs:o}=e,l=`Switchyard ${t}
Score: ${r}
Delivered: ${s} (Streak ${a})
Speed: ${o}ms`;navigator.clipboard.writeText(l)},[e]);return(0,t.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center px-6 py-12 bg-[var(--background)]",children:(0,t.jsxs)("div",{className:"w-full max-w-md",children:["home"===e.screen&&(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("p",{className:"text-xs text-[var(--muted)] uppercase tracking-widest mb-3",children:"One-Click Routing"}),(0,t.jsx)("h1",{className:"text-3xl font-medium tracking-tight text-[var(--foreground)] mb-8",children:"Switchyard"}),(0,t.jsxs)("div",{className:"mb-8 text-center",children:[(0,t.jsx)("p",{className:"text-[var(--muted)] text-sm mb-2",children:"Route trains to matching exits"}),(0,t.jsx)("p",{className:"text-[var(--muted)] text-xs",children:"Toggle switches to change paths"}),(0,t.jsx)("p",{className:"text-[var(--muted)] text-xs",children:"R train → Red, G train → Green, B train → Blue"}),(0,t.jsx)("p",{className:"text-[var(--muted)] text-xs",children:"Collisions or wrong exits cost lives"})]}),(0,t.jsxs)("div",{className:"flex gap-3 mb-8",children:[(0,t.jsx)("button",{onClick:()=>b("daily"),className:"px-6 py-3 text-sm font-medium border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Daily"}),(0,t.jsx)("button",{onClick:()=>b("practice"),className:"px-6 py-3 text-sm font-medium border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"Practice"})]}),a.bestScore>0&&(0,t.jsxs)("p",{className:"text-xs text-[var(--muted)]",children:["Best: ",a.bestScore]})]}),"playing"===e.screen&&(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"w-full flex justify-between items-center mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.score}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"score"})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("p",{className:"text-sm text-[var(--foreground)]",children:["♥".repeat(e.lives),"♡".repeat(3-e.lives)]})}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.streak}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"streak"})]})]}),(()=>{let{switches:r,trains:s}=e;return(0,t.jsxs)("div",{className:"relative border border-[var(--border)]",style:{width:400,height:300},children:[(0,t.jsxs)("svg",{className:"absolute inset-0",width:400,height:300,children:[(0,t.jsx)("line",{x1:"20",y1:"150",x2:"100",y2:"150",stroke:"var(--muted)",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"100",y1:"150",x2:"180",y2:"80",stroke:"var(--muted)",strokeWidth:"2",strokeDasharray:r[0]?"0":"4"}),(0,t.jsx)("line",{x1:"100",y1:"150",x2:"180",y2:"220",stroke:"var(--muted)",strokeWidth:"2",strokeDasharray:r[0]?"4":"0"}),(0,t.jsx)("line",{x1:"180",y1:"80",x2:"240",y2:"80",stroke:"var(--muted)",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"180",y1:"220",x2:"240",y2:"220",stroke:"var(--muted)",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"240",y1:"80",x2:"320",y2:"50",stroke:"var(--muted)",strokeWidth:"2",strokeDasharray:r[1]?"0":"4"}),(0,t.jsx)("line",{x1:"240",y1:"80",x2:"300",y2:"150",stroke:"var(--muted)",strokeWidth:"2",strokeDasharray:r[1]?"4":"0"}),(0,t.jsx)("line",{x1:"240",y1:"220",x2:"320",y2:"250",stroke:"var(--muted)",strokeWidth:"2",strokeDasharray:r[2]?"0":"4"}),(0,t.jsx)("line",{x1:"240",y1:"220",x2:"300",y2:"150",stroke:"var(--muted)",strokeWidth:"2",strokeDasharray:r[2]?"4":"0"}),(0,t.jsx)("line",{x1:"320",y1:"50",x2:"380",y2:"50",stroke:"var(--muted)",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"320",y1:"250",x2:"380",y2:"250",stroke:"var(--muted)",strokeWidth:"2"}),(0,t.jsx)("line",{x1:"300",y1:"150",x2:"380",y2:"150",stroke:"var(--muted)",strokeWidth:"2"})]}),(0,t.jsx)("div",{className:"absolute right-2 top-[35px] text-xs font-medium border border-[var(--foreground)] px-2 py-1",children:"R"}),(0,t.jsx)("div",{className:"absolute right-2 top-[135px] text-xs font-medium border border-[var(--foreground)] px-2 py-1",children:"B"}),(0,t.jsx)("div",{className:"absolute right-2 top-[235px] text-xs font-medium border border-[var(--foreground)] px-2 py-1",children:"G"}),(0,t.jsx)("div",{className:"absolute left-0 top-[140px] text-xs text-[var(--muted)] px-1",children:"IN"}),(0,t.jsx)("button",{onClick:()=>f(0),className:`absolute w-6 h-6 flex items-center justify-center text-xs font-bold border transition-colors ${r[0]?"bg-[var(--foreground)] text-[var(--background)] border-[var(--foreground)]":"bg-[var(--background)] text-[var(--foreground)] border-[var(--foreground)]"}`,style:{left:87,top:137},children:"1"}),(0,t.jsx)("button",{onClick:()=>f(1),className:`absolute w-6 h-6 flex items-center justify-center text-xs font-bold border transition-colors ${r[1]?"bg-[var(--foreground)] text-[var(--background)] border-[var(--foreground)]":"bg-[var(--background)] text-[var(--foreground)] border-[var(--foreground)]"}`,style:{left:227,top:67},children:"2"}),(0,t.jsx)("button",{onClick:()=>f(2),className:`absolute w-6 h-6 flex items-center justify-center text-xs font-bold border transition-colors ${r[2]?"bg-[var(--foreground)] text-[var(--background)] border-[var(--foreground)]":"bg-[var(--background)] text-[var(--foreground)] border-[var(--foreground)]"}`,style:{left:227,top:207},children:"3"}),s.map(e=>{let s=h(e,r);return(0,t.jsx)("div",{className:"absolute w-5 h-5 flex items-center justify-center text-xs font-bold border-2 border-[var(--foreground)] bg-[var(--background)] transition-all duration-75",style:{left:s.x-10,top:s.y-10},children:e.color},e.id)})]})})(),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-4",children:[(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"Click switches (1/2/3) to toggle"}),(0,t.jsx)("button",{onClick:()=>n(!0),className:"px-2 py-1 text-xs border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"?"})]})]}),"gameover"===e.screen&&(0,t.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,t.jsx)("p",{className:"text-xs text-[var(--muted)] uppercase tracking-widest mb-3",children:"Derailed"}),(0,t.jsx)("h2",{className:"text-2xl font-medium text-[var(--foreground)] mb-6",children:"Game Over"}),(0,t.jsx)("p",{className:"text-4xl font-medium text-[var(--foreground)] mb-6",children:e.score}),(0,t.jsxs)("div",{className:"flex gap-8 mb-8",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.delivered}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"Delivered"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-lg font-medium text-[var(--foreground)]",children:e.bestStreak}),(0,t.jsx)("p",{className:"text-xs text-[var(--muted)]",children:"Best Streak"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,t.jsx)("button",{onClick:p,className:"px-6 py-3 text-sm font-medium border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Copy Share"}),(0,t.jsx)("button",{onClick:()=>b("practice"),className:"px-6 py-3 text-sm font-medium border border-[var(--muted)] text-[var(--muted)] hover:border-[var(--foreground)] hover:text-[var(--foreground)] transition-colors",children:"Play Again"})]}),a.bestScore>0&&(0,t.jsxs)("p",{className:"text-xs text-[var(--muted)]",children:["Best: ",a.bestScore]})]}),l&&(0,t.jsx)("div",{className:"fixed inset-0 bg-[var(--background)]/95 flex items-center justify-center p-6 z-50",children:(0,t.jsxs)("div",{className:"max-w-sm text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-[var(--foreground)] mb-4",children:"How to Play"}),(0,t.jsxs)("div",{className:"text-sm text-[var(--muted)] space-y-2 mb-6",children:[(0,t.jsx)("p",{children:"Trains spawn at the left and travel right."}),(0,t.jsx)("p",{children:"Toggle switches (numbered 1-3) to route trains."}),(0,t.jsx)("p",{children:"Match train colors to exits: R→Red, G→Green, B→Blue"}),(0,t.jsx)("p",{children:"Wrong exits cost 1 life. Collisions end the game."}),(0,t.jsx)("p",{children:"Speed increases every 5 correct deliveries."})]}),(0,t.jsx)("button",{onClick:()=>n(!1),className:"px-6 py-2 text-sm border border-[var(--foreground)] text-[var(--foreground)] hover:bg-[var(--foreground)] hover:text-[var(--background)] transition-colors",children:"Got it"})]})})]})})}e.s(["default",()=>s])}]);