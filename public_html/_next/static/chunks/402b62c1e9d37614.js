(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,2716,e=>{"use strict";var t=e.i(43476),r=e.i(71645);let l="#0a0a0a",s="#00f5ff",a="#ff0055",o="#ffd700",n="#ffffff",i="#888888",c="#00f5ff",h="#00ff88";function d(){let e=(0,r.useRef)(null),d=(0,r.useRef)(0),f=(0,r.useRef)(0),u=(0,r.useRef)({screen:"home",score:0,coins:0,combo:0,maxCombo:0,distance:0,speed:5,nearMisses:0}),x=(0,r.useRef)({lane:1,targetLane:1,x:0,y:0,rotation:0,switchProgress:1}),m=(0,r.useRef)([]),g=(0,r.useRef)([]),p=(0,r.useRef)([]),y=(0,r.useRef)(0),b=(0,r.useRef)(0),w=(0,r.useRef)(0),[S,M]=(0,r.useState)(u.current),[v,N]=(0,r.useState)(null),[C,j]=(0,r.useState)({x:0,y:0}),[P,k]=(0,r.useState)({width:400,height:700}),T=(0,r.useCallback)(e=>P.width/2-120+80*e+40,[P.width]),R=(e,t,r)=>e+(t-e)*r,E=[[{lane:0}],[{lane:1}],[{lane:2}],[{lane:0},{lane:1}],[{lane:1},{lane:2}],[{lane:0},{lane:2}],[{lane:0}],[{lane:2}]],A=(0,r.useCallback)(()=>{if("playing"!==u.current.screen)return;let e=E[w.current%E.length];w.current++;let t=["crate","cone","barrier"],r=t[Math.floor(Math.random()*t.length)];e.forEach(({lane:e})=>{m.current.push({lane:e,y:-100,width:1===e?50:45,height:"cone"===r?30:50,type:r,passed:!1})}),y.current=-100},[]),L=(0,r.useCallback)(()=>{if("playing"!==u.current.screen)return;let e=new Set(m.current.filter(e=>e.y<0&&e.y>-200).map(e=>e.lane)),t=[0,1,2].filter(t=>!e.has(t));if(t.length>0){let e=t[Math.floor(Math.random()*t.length)];g.current.push({lane:e,y:-50,collected:!1,pulsePhase:Math.random()*Math.PI*2})}b.current=-50},[]),B=(0,r.useCallback)((e,t,r,l)=>{for(let s=0;s<l;s++){let a=2*Math.PI*s/l+.5*Math.random(),o=2+3*Math.random();p.current.push({x:e,y:t,vx:Math.cos(a)*o,vy:Math.sin(a)*o,life:1,maxLife:1,color:r,size:3+3*Math.random()})}},[]),I=(0,r.useCallback)((e,t)=>{p.current.push({x:e+(Math.random()-.5)*20,y:t+35,vx:(Math.random()-.5)*.5,vy:2+Math.random(),life:.5,maxLife:.5,color:"rgba(100, 100, 100, 0.5)",size:4+4*Math.random()})},[]),O=(0,r.useCallback)(()=>{let e=x.current,t=u.current,r=e.x-20+5,l=e.x+20-5,s=e.y-35+10,a=e.y+35-5;for(let o of m.current){if(o.passed)continue;let n=T(o.lane)-o.width/2,i=T(o.lane)+o.width/2,c=o.y-o.height/2,d=o.y+o.height/2;if(c>a&&!o.passed){o.passed=!0,(e.lane===o.lane||80>Math.abs(e.x-T(o.lane)))&&(t.score+=15,t.nearMisses++,t.combo++,t.combo>t.maxCombo&&(t.maxCombo=t.combo),B(e.x,e.y,h,5));continue}if(l>n&&r<i&&a>c&&s<d)return!0}for(let r of g.current){if(r.collected)continue;let l=T(r.lane),s=r.y;35>Math.sqrt((e.x-l)**2+(e.y-s)**2)&&(r.collected=!0,t.coins++,t.score+=10,t.combo++,t.combo>t.maxCombo&&(t.maxCombo=t.combo),B(l,s,o,8))}return!1},[T,B]),$=(0,r.useCallback)(t=>{let r=e.current;if(!r)return;let c=r.getContext("2d");if(!c)return;let w=f.current?(t-f.current)/1e3:.016;f.current=t;let S=u.current,v=x.current;if(c.fillStyle=l,c.fillRect(0,0,P.width,P.height),"playing"===S.screen){if(S.speed=Math.min(12,S.speed+.001),S.distance+=S.speed,S.score+=1,v.switchProgress<1){let e;v.switchProgress=Math.min(1,v.switchProgress+w/.15);let t=(e=v.switchProgress)*(2-e),r=T(v.lane),l=T(v.targetLane);v.x=R(r,l,t),v.rotation=(v.targetLane-v.lane)*15*(1-t),.3>Math.random()&&I(v.x,v.y)}else v.lane=v.targetLane,v.x=T(v.lane),v.rotation=R(v.rotation,0,.1);if(m.current.forEach(e=>{e.y+=S.speed}),g.current.forEach(e=>{e.y+=S.speed,e.pulsePhase+=5*w}),y.current>200&&Math.random()<.02+.005*S.speed&&A(),y.current+=S.speed,b.current>150&&(.4>Math.random()&&L(),b.current=0),b.current+=S.speed,m.current=m.current.filter(e=>e.y<P.height+100),g.current=g.current.filter(e=>e.y<P.height+50&&!e.collected),p.current.forEach(e=>{e.x+=e.vx,e.y+=e.vy,e.life-=2*w}),p.current=p.current.filter(e=>e.life>0),O()){S.screen="gameover",S.combo=0,j({x:(Math.random()-.5)*10,y:(Math.random()-.5)*10}),setTimeout(()=>j({x:0,y:0}),100),B(v.x,v.y,a,20);let e={score:S.score,coins:S.coins,maxCombo:S.maxCombo,date:new Date().toISOString()},t=localStorage.getItem("pingo_highscore"),r=t?JSON.parse(t):null;(!r||S.score>r.score)&&(localStorage.setItem("pingo_highscore",JSON.stringify(e)),N(e)),M({...S}),d.current=requestAnimationFrame($);return}M({...S})}c.save(),c.translate(C.x,C.y);let k=(P.width-280)/2,E=c.createLinearGradient(k,0,k+280,0);E.addColorStop(0,"#0f0f1a"),E.addColorStop(.5,"#1a1a2e"),E.addColorStop(1,"#0f0f1a"),c.fillStyle=E,c.fillRect(k,0,280,P.height),c.strokeStyle="#16213e",c.lineWidth=2,c.setLineDash([30,20]);let F=S.distance%50;for(let e=1;e<3;e++){let t=T(e)-40;c.beginPath(),c.moveTo(t,-50+F),c.lineTo(t,P.height),c.stroke()}if(c.setLineDash([]),c.shadowColor=s,c.shadowBlur=15,c.strokeStyle=s,c.lineWidth=3,c.globalAlpha=.5,c.beginPath(),c.moveTo(k,0),c.lineTo(k,P.height),c.stroke(),c.beginPath(),c.moveTo(k+280,0),c.lineTo(k+280,P.height),c.stroke(),c.globalAlpha=1,c.shadowBlur=0,g.current.forEach(e=>{if(e.collected)return;let t=T(e.lane),r=e.y,l=15*(.2*Math.sin(e.pulsePhase)+1);c.shadowColor="#ffee00",c.shadowBlur=20,c.fillStyle=o,c.beginPath(),c.arc(t,r,l,0,2*Math.PI),c.fill(),c.fillStyle="#ffee88",c.beginPath(),c.arc(t-3,r-3,.4*l,0,2*Math.PI),c.fill(),c.shadowBlur=0}),m.current.forEach(e=>{let t=T(e.lane),r=e.y;c.shadowColor="#ff0055",c.shadowBlur=15,c.fillStyle=a,"cone"===e.type?(c.beginPath(),c.moveTo(t,r-e.height/2),c.lineTo(t-e.width/2,r+e.height/2),c.lineTo(t+e.width/2,r+e.height/2),c.closePath(),c.fill()):"barrier"===e.type?(c.fillRect(t-e.width/2,r-e.height/2,e.width,e.height),c.fillStyle="#ff6688",c.fillRect(t-e.width/2,r-e.height/4,e.width,e.height/4)):(c.fillRect(t-e.width/2,r-e.height/2,e.width,e.height),c.strokeStyle="#cc0044",c.lineWidth=2,c.beginPath(),c.moveTo(t-e.width/2,r-e.height/2),c.lineTo(t+e.width/2,r+e.height/2),c.moveTo(t+e.width/2,r-e.height/2),c.lineTo(t-e.width/2,r+e.height/2),c.stroke()),c.shadowBlur=0}),p.current.forEach(e=>{c.globalAlpha=e.life/e.maxLife,c.fillStyle=e.color,c.beginPath(),c.arc(e.x,e.y,e.size*(e.life/e.maxLife),0,2*Math.PI),c.fill()}),c.globalAlpha=1,"playing"===S.screen||"gameover"===S.screen){c.save(),c.translate(v.x,v.y),c.rotate(v.rotation*Math.PI/180),c.shadowColor="#00f5ff",c.shadowBlur=25;let e=c.createLinearGradient(-20,0,20,0);e.addColorStop(0,"#006688"),e.addColorStop(.5,"#00f5ff"),e.addColorStop(1,"#006688"),c.fillStyle=e,c.beginPath(),c.roundRect(-20,-35,40,70,8),c.fill(),c.fillStyle="#003344",c.beginPath(),c.roundRect(-14,-25,28,20,4),c.fill(),c.fillStyle="#ffffff",c.shadowColor="#ffffff",c.shadowBlur=10,c.beginPath(),c.arc(-12,-30,4,0,2*Math.PI),c.arc(12,-30,4,0,2*Math.PI),c.fill(),c.fillStyle="#ff3366",c.shadowColor="#ff3366",c.beginPath(),c.arc(-12,30,4,0,2*Math.PI),c.arc(12,30,4,0,2*Math.PI),c.fill(),c.shadowBlur=0,c.restore()}"playing"===S.screen&&(c.fillStyle=n,c.font="bold 24px -apple-system, BlinkMacSystemFont, sans-serif",c.textAlign="left",c.fillText(`${S.score}`,20,40),c.fillStyle=o,c.font="18px -apple-system, BlinkMacSystemFont, sans-serif",c.fillText(`${S.coins}`,20,70),S.combo>1&&(c.fillStyle=h,c.font="bold 20px -apple-system, BlinkMacSystemFont, sans-serif",c.textAlign="right",c.fillText(`x${S.combo}`,P.width-20,40)),c.fillStyle=i,c.font="14px -apple-system, BlinkMacSystemFont, sans-serif",c.textAlign="right",c.fillText(`${Math.floor(10*S.speed)} km/h`,P.width-20,70)),c.restore(),d.current=requestAnimationFrame($)},[P,T,O,A,L,I,B,C]),F=(0,r.useCallback)(()=>{let e=u.current,t=x.current;"home"===e.screen||"gameover"===e.screen?D():"playing"===e.screen&&t.switchProgress>=.8&&(t.targetLane=(t.targetLane+1)%3,t.switchProgress=0)},[]),D=(0,r.useCallback)(()=>{u.current={screen:"playing",score:0,coins:0,combo:0,maxCombo:0,distance:0,speed:5,nearMisses:0},x.current={lane:1,targetLane:1,x:T(1),y:P.height-150,rotation:0,switchProgress:1},m.current=[],g.current=[],p.current=[],y.current=200,b.current=100,w.current=0,M(u.current)},[T,P.height]);return(0,r.useEffect)(()=>{let e=()=>{k({width:Math.min(400,window.innerWidth),height:Math.min(700,window.innerHeight-100)})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{"playing"===u.current.screen&&(x.current.y=P.height-150,x.current.x=T(x.current.lane))},[P,T]),(0,r.useEffect)(()=>{let e=localStorage.getItem("pingo_highscore");e&&N(JSON.parse(e))},[]),(0,r.useEffect)(()=>(x.current.x=T(1),x.current.y=P.height-150,f.current=0,d.current=requestAnimationFrame($),()=>{cancelAnimationFrame(d.current)}),[$,T,P.height]),(0,r.useEffect)(()=>{let e=e=>{("Space"===e.code||"ArrowRight"===e.code||"ArrowLeft"===e.code)&&(e.preventDefault(),F())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[F]),(0,t.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center",style:{background:l},children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("canvas",{ref:e,width:P.width,height:P.height,onClick:F,onTouchStart:e=>{e.preventDefault(),F()},className:"cursor-pointer touch-none",style:{borderRadius:"12px",boxShadow:`0 0 60px ${c}22`}}),"home"===S.screen&&(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",style:{background:"rgba(10, 10, 10, 0.85)",borderRadius:"12px"},children:[(0,t.jsx)("h1",{className:"text-4xl font-bold mb-2 tracking-tight",style:{color:c,textShadow:`0 0 30px ${c}`},children:"ONE-BUTTON"}),(0,t.jsx)("h2",{className:"text-5xl font-black mb-8",style:{color:n,textShadow:`0 0 20px ${c}44`},children:"DRIFT"}),(0,t.jsxs)("div",{className:"mb-8 text-center px-8",children:[(0,t.jsx)("p",{style:{color:i},className:"mb-2",children:"Tap or press Space to switch lanes"}),(0,t.jsx)("p",{style:{color:i},className:"text-sm",children:"Collect coins avoid obstacles"})]}),(0,t.jsx)("button",{onClick:F,className:"px-12 py-4 text-xl font-bold rounded-full transition-all hover:scale-105",style:{background:c,color:l,boxShadow:`0 0 30px ${c}66`},children:"PLAY"}),v&&(0,t.jsxs)("div",{className:"mt-8 text-center",children:[(0,t.jsx)("p",{style:{color:i},className:"text-sm",children:"Best Score"}),(0,t.jsx)("p",{style:{color:o},className:"text-2xl font-bold",children:v.score})]})]}),"gameover"===S.screen&&(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",style:{background:"rgba(10, 10, 10, 0.9)",borderRadius:"12px"},children:[(0,t.jsx)("h2",{className:"text-3xl font-bold mb-6",style:{color:a,textShadow:`0 0 20px ${a}`},children:"GAME OVER"}),(0,t.jsxs)("div",{className:"mb-8 text-center",children:[(0,t.jsx)("p",{style:{color:i},className:"text-sm mb-1",children:"Score"}),(0,t.jsx)("p",{style:{color:n},className:"text-4xl font-bold mb-4",children:S.score}),(0,t.jsxs)("div",{className:"flex gap-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{style:{color:o},children:S.coins}),(0,t.jsx)("p",{style:{color:i},className:"text-xs",children:"Coins"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("p",{style:{color:h},children:["x",S.maxCombo]}),(0,t.jsx)("p",{style:{color:i},className:"text-xs",children:"Best Combo"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{style:{color:c},children:S.nearMisses}),(0,t.jsx)("p",{style:{color:i},className:"text-xs",children:"Near Misses"})]})]})]}),v&&S.score>=v.score&&(0,t.jsx)("p",{className:"mb-4 text-lg font-bold animate-pulse",style:{color:o},children:"NEW HIGH SCORE!"}),(0,t.jsx)("button",{onClick:F,className:"px-10 py-3 text-lg font-bold rounded-full transition-all hover:scale-105",style:{background:c,color:l,boxShadow:`0 0 30px ${c}66`},children:"PLAY AGAIN"}),v&&(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsxs)("p",{style:{color:i},className:"text-xs",children:["Best: ",v.score]})})]}),"playing"===S.screen&&(0,t.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-6 py-2 rounded-full",style:{background:"rgba(0, 245, 255, 0.1)",border:"1px solid rgba(0, 245, 255, 0.3)"},children:(0,t.jsx)("p",{style:{color:c},className:"text-sm font-medium",children:"TAP ANYWHERE"})})]}),(0,t.jsx)("p",{className:"mt-6 text-xs",style:{color:i},children:"Space / Tap to switch lanes"})]})}e.s(["default",()=>d])}]);